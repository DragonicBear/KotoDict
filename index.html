function performSearch() {
    const searchInput = document.getElementById('searchInput');
    const resultCount = document.getElementById('resultCount');
    const resultList = document.getElementById('resultList');
    
    const query = searchInput.value.trim();
    const matchType = document.querySelector('input[name="match"]:checked').value;
    const charFilters = Array.from(document.querySelectorAll('input[name="chars"]:checked'))
        .map(cb => parseInt(cb.value));
    
    let results = [...dictionary];
    
    if (query) {
        const hasWildcard = query.includes('-') || query.includes(' ');
        
        if (hasWildcard) {
            // Replace spaces with dashes for uniform processing
            const standardizedQuery = query.replace(/ /g, '-');
            
            results = results.filter(word => {
                const wordLen = word.word.length;
                
                // If user typed '----しょう' (6 chars) and word is 'きしょう' (4 chars)
                // We compare the word against the LAST 4 characters of the query
                if (wordLen <= standardizedQuery.length) {
                    const patternSegment = standardizedQuery.slice(-wordLen);
                    
                    // Convert dashes to '.' for regex
                    const regexStr = patternSegment.replace(/-/g, '.');
                    const regex = new RegExp(`^${regexStr}$`);
                    
                    return regex.test(word.word);
                }
                return false;
            });
        } else {
            // Standard prefix/suffix/fuzzy logic
            results = results.filter(word => {
                if (matchType === 'prefix') return word.word.startsWith(query);
                if (matchType === 'suffix') return word.word.endsWith(query);
                return word.word.includes(query);
            });
        }
    }
    
    // Filter by character count
    if (charFilters.length > 0) {
        results = results.filter(word => charFilters.includes(word.word.length));
    }
    
    // ... (rest of your existing display logic: currentResults assignment, UI updates, etc.)
    currentResults = results;
    
    // Limit and Render (keep your existing render code here)
    renderResults(results); 
}
